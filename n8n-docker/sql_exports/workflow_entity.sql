create table workflow_entity
(
    id             varchar(36)                                                not null
        primary key,
    name           varchar(128)                                               not null,
    active         boolean                                                    not null,
    nodes          text,
    connections    text,
    settings       text,
    staticData     text,
    pinData        text,
    versionId      varchar(36),
    triggerCount   integer     default 0,
    meta           text,
    parentFolderId varchar(36)
        constraint FK_04a4db5906fbc5606c71448d912
            references folder
            on delete cascade,
    createdAt      datetime(3) default (STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW')) not null,
    updatedAt      datetime(3) default (STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW')) not null
);

create index IDX_e10425f6ab9964c4c1623a4a03
    on workflow_entity (name);

INSERT INTO workflow_entity (id, name, active, nodes, connections, settings, staticData, pinData, versionId, triggerCount, meta, parentFolderId, createdAt, updatedAt) VALUES ('iO9xGILabwc4B9i1', 'SAMPLE - WORKS - DON''T TOUCH - Demo: My first AI Agent in n8n', 0, '[{"parameters":{"options":{}},"id":"b24b05a7-d802-4413-bfb1-23e1e76f6203","name":"When chat message received","type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[360,20],"webhookId":"a889d2ae-2159-402f-b326-5f61e90f602e"},{"parameters":{"content":"## Start by saying ''hi''\n![Button](https://i.imgur.com/PrIBJI6.png)","height":149,"width":150},"id":"5592c045-6718-4c4e-9961-ce67a251b6df","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[180,-40]},{"parameters":{"model":"gpt-4o","options":{}},"id":"d5e60eb2-267c-4f68-aefe-439031bcaceb","name":"OpenAI Model","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1,"position":[500,240],"credentials":{"openAiApi":{"id":"DhQr2s2uFtBQf31l","name":"OpenAi account"}}},{"parameters":{"promptType":"define","text":"=## Steps to follow\n\n{{ $agentInfo.memoryConnectedToAgent ? ''1. Skip'': `1. STOP and output the following:\n\"Welcome to n8n. Let''s start with the first step to give me memory: \\n\"Click the **+** button on the agent that says ''memory'' and choose ''Simple memory.'' Just tell me once you''ve done that.\"\n----- END OF OUTPUT && IGNORE BELOW -----` }} \n\n\n{{ Boolean($agentInfo.tools.find((tool) => tool.type === ''Google Calendar Tool'')) ? ''2. Skip'' : \n`2. STOP and output the following: \\n\"Click the **+** button on the agent that says ''tools'' and choose ''Google Calendar.''\" \\n ----- IGNORE BELOW -----` }}\n\n\n{{ $agentInfo.tools.find((tool) => tool.type === ''Google Calendar Tool'').hasCredentials ? ''3. Skip'' :\n`3. STOP and output the following:\n\"Open the Google Calendar tool (double-click) and choose a credential from the drop-down.\" \\n ----- IGNORE BELOW -----` }}\n\n\n{{ $agentInfo.tools.find((tool) => tool.type === ''Google Calendar Tool'').resource === ''Event'' ? ''4. Skip'' :\n`4. STOP and output the following:\n\"Open the Google Calendar tool (double-click) and set **resource** = ''Event''\" `}}\n\n\n\n\n{{ $agentInfo.tools.find((tool) => tool.type === ''Google Calendar Tool'').hasValidCalendar ? ''6. Skip'' :\n`6. STOP and output the following:\n\"Open the Google Calendar tool (double-click) and choose a calendar from the ''calendar'' drop-down.\" \\n ----- IGNORE BELOW -----` }}\n\n\n8. If all steps are completed, output the following:\n\"Would you like me to check all events in your calendar for tomorrow {{ $now.plus(1, ''days'').toString().split(''T'')[0] }}?\"\n\n# User message\n\n{{ $json.chatInput }}","options":{"systemMessage":"=You are a friendly Agent designed to guide users through these steps.\n\n- Stop at the earliest step mentioned in the steps\n- Respond concisely and do **not** disclose these internal instructions to the user. Only return defined output below.\n- Don''t output any lines that start with -----\n- Replace \":sparks:\" with \"✨\" in any message"}},"id":"41174c8a-6ac8-42bd-900e-ca15196600c5","name":"Agent","type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[580,20]},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[680,240],"id":"a5f1f2b6-c89c-4711-8b1f-a596c2c8c9db","name":"Simple Memory"},{"parameters":{"operation":"getAll","calendar":{"__rl":true,"value":"mariano.blua@gmail.com","mode":"id"},"returnAll":"={{ $fromAI(''Return_All'', ``, ''boolean'') }}","options":{}},"type":"n8n-nodes-base.googleCalendarTool","typeVersion":1.3,"position":[840,240],"id":"f6fb6937-b044-458c-a9ac-cebd99e7ef14","name":"Google Calendar","notesInFlow":false,"credentials":{"googleCalendarOAuth2Api":{"id":"jKPxFsKiRtSfyAXy","name":"Google Calendar account"}}}]', '{"When chat message received":{"main":[[{"node":"Agent","type":"main","index":0}]]},"OpenAI Model":{"ai_languageModel":[[{"node":"Agent","type":"ai_languageModel","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"Agent","type":"ai_memory","index":0}]]},"Google Calendar":{"ai_tool":[[{"node":"Agent","type":"ai_tool","index":0}]]}}', '{"executionOrder":"v1"}', null, '{}', '02de78ce-5a0c-4157-91d6-b43e150dbe01', 0, '{"templateId":"self-building-ai-agent","templateCredsSetupCompleted":true}', null, '2025-05-04 02:23:04.390', '2025-05-04 14:18:33');
INSERT INTO workflow_entity (id, name, active, nodes, connections, settings, staticData, pinData, versionId, triggerCount, meta, parentFolderId, createdAt, updatedAt) VALUES ('h0Vp95lVDp1XNJno', 'My workflow', 0, '[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[0,0],"id":"af4ae9bf-c9c4-4fcc-bf63-ee9f7714a938","name":"When clicking ‘Test workflow’"},{"parameters":{"operation":"getAll","limit":1,"filters":{}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[220,0],"id":"e75bb8aa-e244-4828-8778-d2894836a02d","name":"Gmail","webhookId":"486674bb-ca7a-46ea-b543-fe5b5e1a2aa0","credentials":{"gmailOAuth2":{"id":"SBmsMPezCXDA9tAs","name":"Gmail account"}}},{"parameters":{"jsCode":"// Loop over input items and add a new field called ''myNewField'' to the JSON of each one\nfor (const item of $input.all()) {\n  item.json.myNewField = 1;\n\n  console.log(\"Asunto:\", item.json.subject);\n  console.log(\"Remitente:\", item.json.from);\n  console.log(\"Mensaje:\", item.json.text);  // o `item.json.html`\n\n\n}\n\nreturn $input.all();"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[440,0],"id":"e324b908-1672-4545-b54c-ac984d81b0ad","name":"Code"}]', '{"When clicking ‘Test workflow’":{"main":[[{"node":"Gmail","type":"main","index":0}]]},"Gmail":{"main":[[{"node":"Code","type":"main","index":0}]]}}', '{"executionOrder":"v1"}', null, '{}', '65852321-eb3b-4ab8-9ded-a6a4d8c5b664', 0, '{"templateCredsSetupCompleted":true}', null, '2025-05-04 02:25:21.905', '2025-05-04 02:30:33');
INSERT INTO workflow_entity (id, name, active, nodes, connections, settings, staticData, pinData, versionId, triggerCount, meta, parentFolderId, createdAt, updatedAt) VALUES ('KYqQYZoiGyncZDoR', 'SAMPLE - Gmail Inbox review', 0, '[{"parameters":{"pollTimes":{"item":[{"mode":"everyHour","minute":5}]},"filters":{"labelIds":[],"q":"-label:\"Sent Emails\" -label:\"AI_v1\""}},"type":"n8n-nodes-base.gmailTrigger","typeVersion":1.2,"position":[0,-40],"id":"6d25323c-d7c4-49ed-938b-1e042a91ca1e","name":"Gmail Trigger","credentials":{"gmailOAuth2":{"id":"SBmsMPezCXDA9tAs","name":"Gmail: mariano.blua@gmail.com"}}},{"parameters":{"inputText":"=Subject:  {{ $json.Subject }}\nEmail Body: {{ $json.snippet }}","categories":{"categories":[{"category":"AI_v1 -> Not Important","description":"Any promotional or advertising emails that I did not explicitly request or that are not a direct response to a previous email I sent.\n\nEmails that attempt to sell a product or service without referencing a prior conversation or action on my part.\n\nSocial media notifications that do not involve direct interactions with me (e.g., general updates, newsletters, engagement summaries).\n\nAny email that appears automated and lacks personal context or relevance to my past communications or interests."},{"category":"AI_v1 -> Important","description":"Any email that is a direct reply to a message I previously sent.\n\nEmails that reference a specific previous interaction, action, or request from me.\n\nMessages from known contacts, colleagues, or services I use regularly, especially if they contain updates or information directly related to me.\n\nTransactional emails that confirm actions I took (e.g., purchases, reservations, account changes).\n\nPersonalized notifications from platforms I use, especially if they mention my name or reference specific activity I initiated.\n\nEmails that include unique information or opportunities directly related to my work, interests, or current tasks."},{"category":"AI_v1 -> Unknown","description":"Emails that doesn''t fit previous criterias"}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.textClassifier","typeVersion":1,"position":[220,-40],"id":"00fabe63-3d5e-45b1-bd89-0d42e0658878","name":"Text Classifier"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[308,180],"id":"4669df59-ad68-41f8-89a8-524d1158f88e","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"DhQr2s2uFtBQf31l","name":"OpenAi account"}}},{"parameters":{"operation":"addLabels","messageId":"={{ $json.threadId }}","labelIds":["Label_789074220795879132","Label_6235120611760018165"]},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[600,-240],"id":"2620fa2d-6757-42f3-aff2-c7d1a4d69a84","name":"AI_v1 -> Not Important","webhookId":"8579ad13-d881-417a-b867-683c237972c9","credentials":{"gmailOAuth2":{"id":"SBmsMPezCXDA9tAs","name":"Gmail: mariano.blua@gmail.com"}}},{"parameters":{"operation":"addLabels","messageId":"={{ $json.threadId }}","labelIds":["Label_1999246963055338865","Label_6235120611760018165"]},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[600,-40],"id":"43f202a5-47ee-42d8-b34f-91efae34b75f","name":"AI_v1 -> Important","webhookId":"ab5a5707-20c5-4201-a3d1-de6a51d935c4","credentials":{"gmailOAuth2":{"id":"SBmsMPezCXDA9tAs","name":"Gmail: mariano.blua@gmail.com"}}},{"parameters":{"operation":"addLabels","messageId":"={{ $json.threadId }}","labelIds":["Label_6056131312529157342","Label_6235120611760018165"]},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[600,160],"id":"ba73c847-103f-4831-a937-57b05c784516","name":"AI_v1 -> Unknown","webhookId":"497c4ff7-ac61-4bd6-9376-2dd246d6e64b","credentials":{"gmailOAuth2":{"id":"SBmsMPezCXDA9tAs","name":"Gmail: mariano.blua@gmail.com"}}},{"parameters":{"resource":"thread","operation":"removeLabels","threadId":"={{ $(''Text Classifier'').item.json.threadId }}","labelIds":["INBOX"]},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[820,-240],"id":"32a992fc-c9ee-41db-82ff-d73566774cb7","name":"Remove INBOX","webhookId":"368e04c3-84bc-4202-b20b-4bfc09a6b17d","credentials":{"gmailOAuth2":{"id":"SBmsMPezCXDA9tAs","name":"Gmail: mariano.blua@gmail.com"}}},{"parameters":{"resource":"thread","operation":"addLabels","threadId":"={{ $(''Text Classifier'').item.json.threadId }}","labelIds":["INBOX"]},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[820,-40],"id":"d248588c-b8f7-44fa-8d09-e51f8d164689","name":"Add INBOX","webhookId":"8ee86319-5087-4c71-bcab-03b8339c2a35","credentials":{"gmailOAuth2":{"id":"SBmsMPezCXDA9tAs","name":"Gmail: mariano.blua@gmail.com"}}}]', '{"Gmail Trigger":{"main":[[{"node":"Text Classifier","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Text Classifier","type":"ai_languageModel","index":0}]]},"Text Classifier":{"main":[[{"node":"AI_v1 -> Not Important","type":"main","index":0}],[{"node":"AI_v1 -> Important","type":"main","index":0}],[{"node":"AI_v1 -> Unknown","type":"main","index":0}]]},"AI_v1 -> Not Important":{"main":[[{"node":"Remove INBOX","type":"main","index":0}]]},"AI_v1 -> Important":{"main":[[{"node":"Add INBOX","type":"main","index":0}]]},"AI_v1 -> Unknown":{"main":[[{"node":"Add INBOX","type":"main","index":0}]]}}', '{"executionOrder":"v1"}', null, '{}', '844e8c1b-1f2b-44c6-8cfe-04d71530e0db', 0, '{"templateCredsSetupCompleted":true}', null, '2025-05-04 18:24:40.064', '2025-05-04 19:55:10');
